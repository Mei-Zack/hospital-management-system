import{d as v,r as f,a as N,b as u,o as y,c as h,e as l,w as a,f as R,g as _,h as x,E as p,_ as U}from"./index-459586b0.js";import{r as k}from"./auth-07d929a4.js";import"./request-51dbdc85.js";const q={class:"register-container"},C=v({__name:"RegisterView",setup(E){const g=x(),m=f(),d=f(!1),e=N({username:"",password:"",realName:"",phone:"",email:"",role:"USER",status:1}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],realName:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}]},V=async()=>{if(m.value)try{if(await m.value.validate(),!e.username||!e.password||!e.realName||!e.phone||!e.email){p.error("请填写所有必填字段");return}if(e.username=e.username.trim(),e.password=e.password.trim(),e.realName=e.realName.trim(),e.phone=e.phone.trim(),e.email=e.email.trim(),console.log("注册前检查密码字段:",e.password),!e.password){p.error("密码不能为空");return}d.value=!0;const t={username:e.username,password:e.password,realName:e.realName,phone:e.phone,email:e.email,role:e.role,status:e.status};await k(t),p.success("注册成功"),g.push("/login")}catch(t){console.error("注册失败:",t)}finally{d.value=!1}};return(t,r)=>{const n=u("el-input"),s=u("el-form-item"),i=u("el-button"),c=u("el-form"),b=u("el-card");return y(),h("div",q,[l(b,{class:"register-card"},{header:a(()=>r[6]||(r[6]=[R("h2",null,"医院管理系统注册",-1)])),default:a(()=>[l(c,{ref_key:"formRef",ref:m,model:e,rules:w,"label-width":"80px"},{default:a(()=>[l(s,{label:"用户名",prop:"username"},{default:a(()=>[l(n,{modelValue:e.username,"onUpdate:modelValue":r[0]||(r[0]=o=>e.username=o),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),l(s,{label:"密码",prop:"password"},{default:a(()=>[l(n,{modelValue:e.password,"onUpdate:modelValue":r[1]||(r[1]=o=>e.password=o),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),l(s,{label:"真实姓名",prop:"realName"},{default:a(()=>[l(n,{modelValue:e.realName,"onUpdate:modelValue":r[2]||(r[2]=o=>e.realName=o),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1}),l(s,{label:"手机号",prop:"phone"},{default:a(()=>[l(n,{modelValue:e.phone,"onUpdate:modelValue":r[3]||(r[3]=o=>e.phone=o),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),l(s,{label:"邮箱",prop:"email"},{default:a(()=>[l(n,{modelValue:e.email,"onUpdate:modelValue":r[4]||(r[4]=o=>e.email=o),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),l(s,null,{default:a(()=>[l(i,{type:"primary",onClick:V,loading:d.value},{default:a(()=>r[7]||(r[7]=[_("注册")])),_:1,__:[7]},8,["loading"]),l(i,{onClick:r[5]||(r[5]=o=>t.$router.push("/login"))},{default:a(()=>r[8]||(r[8]=[_("返回登录")])),_:1,__:[8]})]),_:1})]),_:1},8,["model"])]),_:1})])}}});const I=U(C,[["__scopeId","data-v-3d3af052"]]);export{I as default};

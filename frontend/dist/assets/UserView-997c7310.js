import{d as I,r as g,a as R,B as T,b as n,G as A,o as d,c as $,e,w as l,f as V,H as K,g as u,I as P,i as v,t as h,J as F,E as G,_ as H}from"./index-459586b0.js";import{g as J,a as j}from"./user-58577376.js";import"./request-51dbdc85.js";const q={class:"user-container"},L={class:"card-header"},Q={class:"pagination"},W=I({__name:"UserView",setup(X){const p=g(!1),y=g(0),b=g([]),o=R({current:1,size:10,username:"",role:""}),z={ADMIN:"管理员",USER:"用户",DOCTOR:"医生"},c=async()=>{try{p.value=!0;const s=await J(o);b.value=s.data.records,y.value=s.data.total}finally{p.value=!1}},C=()=>{o.current=1,c()},D=s=>{o.size=s,c()},S=s=>{o.current=s,c()},k=async(s,a)=>{try{await F.confirm(`确认要${a===1?"启用":"禁用"}该用户吗？`,"提示",{type:"warning"}),await j(s,a),G.success("操作成功"),c()}catch(i){i!=="cancel"&&console.error(i)}};return T(()=>{c()}),(s,a)=>{const i=n("el-input"),_=n("el-form-item"),m=n("el-option"),w=n("el-select"),f=n("el-button"),x=n("el-form"),r=n("el-table-column"),U=n("el-tag"),M=n("el-table"),N=n("el-pagination"),B=n("el-card"),E=A("loading");return d(),$("div",q,[e(B,null,{header:l(()=>[V("div",L,[e(x,{inline:!0,model:o},{default:l(()=>[e(_,null,{default:l(()=>[e(i,{modelValue:o.username,"onUpdate:modelValue":a[0]||(a[0]=t=>o.username=t),placeholder:"用户名",clearable:"",onKeyup:K(C,["enter"])},null,8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(w,{modelValue:o.role,"onUpdate:modelValue":a[1]||(a[1]=t=>o.role=t),placeholder:"角色",clearable:""},{default:l(()=>[e(m,{label:"管理员",value:"ADMIN"}),e(m,{label:"用户",value:"USER"}),e(m,{label:"医生",value:"DOCTOR"})]),_:1},8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(f,{type:"primary",onClick:C},{default:l(()=>a[4]||(a[4]=[u("搜索")])),_:1,__:[4]})]),_:1})]),_:1},8,["model"])])]),default:l(()=>[P((d(),v(M,{data:b.value,border:"",style:{width:"100%"}},{default:l(()=>[e(r,{prop:"username",label:"用户名"}),e(r,{prop:"realName",label:"真实姓名"}),e(r,{prop:"phone",label:"手机号"}),e(r,{prop:"email",label:"邮箱"}),e(r,{prop:"role",label:"角色"},{default:l(({row:t})=>[e(U,{type:t.role==="ADMIN"?"danger":t.role==="DOCTOR"?"success":""},{default:l(()=>[u(h(z[t.role]),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"status",label:"状态"},{default:l(({row:t})=>[e(U,{type:t.status===1?"success":"danger"},{default:l(()=>[u(h(t.status===1?"正常":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(r,{label:"操作",width:"200"},{default:l(({row:t})=>[t.status===1?(d(),v(f,{key:0,type:"danger",link:"",onClick:O=>k(t.id,0)},{default:l(()=>a[5]||(a[5]=[u(" 禁用 ")])),_:2,__:[5]},1032,["onClick"])):(d(),v(f,{key:1,type:"success",link:"",onClick:O=>k(t.id,1)},{default:l(()=>a[6]||(a[6]=[u(" 启用 ")])),_:2,__:[6]},1032,["onClick"]))]),_:1})]),_:1},8,["data"])),[[E,p.value]]),V("div",Q,[e(N,{"current-page":o.current,"onUpdate:currentPage":a[2]||(a[2]=t=>o.current=t),"page-size":o.size,"onUpdate:pageSize":a[3]||(a[3]=t=>o.size=t),"page-sizes":[10,20,50],total:y.value,layout:"total, sizes, prev, pager, next",onSizeChange:D,onCurrentChange:S},null,8,["current-page","page-size","total"])])]),_:1})])}}});const te=H(W,[["__scopeId","data-v-730a170c"]]);export{te as default};

import{d as z,u as T,r as c,a as $,b as t,o as k,i as C,w as l,e,j as n,f as s,k as G,g as p,t as H,l as J,h as K,E as O,m as Q,n as W,p as X,q as Y,s as Z,v as h,x as ee,y as le,z as oe,A as te,_ as ne}from"./index-459586b0.js";import{u as se}from"./user-58577376.js";import"./request-51dbdc85.js";const ae={class:"header-right"},de={class:"user-info"},ue=z({__name:"LayoutView",setup(re){var g;const U=J(),v=K(),_=T(),i=c(!1),m=c(!1),f=c(),r=$({userId:(g=_.user)==null?void 0:g.id,oldPassword:"",newPassword:""}),N={oldPassword:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"}]},F=w=>{w==="password"?i.value=!0:w==="logout"&&(_.clearUser(),v.push("/login"))},R=async()=>{if(f.value){await f.value.validate();try{m.value=!0,await se(r),O.success("密码修改成功"),i.value=!1,_.clearUser(),v.push("/login")}finally{m.value=!1}}};return(w,o)=>{const d=t("el-icon"),u=t("el-menu-item"),q=t("el-sub-menu"),B=t("el-menu"),E=t("el-aside"),x=t("el-dropdown-item"),I=t("el-dropdown-menu"),L=t("el-dropdown"),S=t("el-header"),A=t("router-view"),D=t("el-main"),y=t("el-container"),V=t("el-input"),b=t("el-form-item"),M=t("el-form"),P=t("el-button"),j=t("el-dialog");return k(),C(y,{class:"layout-container"},{default:l(()=>[e(E,{width:"200px"},{default:l(()=>[e(B,{router:"","default-active":n(U).path,class:"menu","background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#409EFF"},{default:l(()=>{var a;return[e(u,{index:"/"},{default:l(()=>[e(d,null,{default:l(()=>[e(n(Q))]),_:1}),o[4]||(o[4]=s("span",null,"首页",-1))]),_:1,__:[4]}),((a=n(_).user)==null?void 0:a.role)==="ADMIN"?(k(),C(u,{key:0,index:"/users"},{default:l(()=>[e(d,null,{default:l(()=>[e(n(W))]),_:1}),o[5]||(o[5]=s("span",null,"用户管理",-1))]),_:1,__:[5]})):G("",!0),e(u,{index:"/doctors"},{default:l(()=>[e(d,null,{default:l(()=>[e(n(X))]),_:1}),o[6]||(o[6]=s("span",null,"医生管理",-1))]),_:1,__:[6]}),e(u,{index:"/appointments"},{default:l(()=>[e(d,null,{default:l(()=>[e(n(Y))]),_:1}),o[7]||(o[7]=s("span",null,"预约管理",-1))]),_:1,__:[7]}),e(q,{index:"/medicine"},{title:l(()=>[e(d,null,{default:l(()=>[e(n(Z))]),_:1}),o[8]||(o[8]=s("span",null,"药品管理",-1))]),default:l(()=>[e(u,{index:"/medicines"},{default:l(()=>[e(d,null,{default:l(()=>[e(n(h))]),_:1}),o[9]||(o[9]=s("span",null,"药品列表",-1))]),_:1,__:[9]}),e(u,{index:"/medicine-inbounds"},{default:l(()=>[e(d,null,{default:l(()=>[e(n(ee))]),_:1}),o[10]||(o[10]=s("span",null,"药品入库",-1))]),_:1,__:[10]}),e(u,{index:"/medicine-sales"},{default:l(()=>[e(d,null,{default:l(()=>[e(n(le))]),_:1}),o[11]||(o[11]=s("span",null,"药品销售",-1))]),_:1,__:[11]}),e(u,{index:"/medicine-statistics"},{default:l(()=>[e(d,null,{default:l(()=>[e(n(oe))]),_:1}),o[12]||(o[12]=s("span",null,"药品统计",-1))]),_:1,__:[12]})]),_:1})]}),_:1},8,["default-active"])]),_:1}),e(y,null,{default:l(()=>[e(S,null,{default:l(()=>[o[15]||(o[15]=s("div",{class:"header-left"},[s("h2",null,"医院管理系统")],-1)),s("div",ae,[e(L,{onCommand:F},{dropdown:l(()=>[e(I,null,{default:l(()=>[e(x,{command:"password"},{default:l(()=>o[13]||(o[13]=[p("修改密码")])),_:1,__:[13]}),e(x,{command:"logout"},{default:l(()=>o[14]||(o[14]=[p("退出登录")])),_:1,__:[14]})]),_:1})]),default:l(()=>{var a;return[s("span",de,[p(H((a=n(_).user)==null?void 0:a.realName)+" ",1),e(d,null,{default:l(()=>[e(n(te))]),_:1})])]}),_:1})])]),_:1,__:[15]}),e(D,null,{default:l(()=>[e(A)]),_:1})]),_:1}),e(j,{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=a=>i.value=a),title:"修改密码",width:"400px"},{footer:l(()=>[e(P,{onClick:o[2]||(o[2]=a=>i.value=!1)},{default:l(()=>o[16]||(o[16]=[p("取消")])),_:1,__:[16]}),e(P,{type:"primary",onClick:R,loading:m.value},{default:l(()=>o[17]||(o[17]=[p(" 确定 ")])),_:1,__:[17]},8,["loading"])]),default:l(()=>[e(M,{ref_key:"passwordFormRef",ref:f,model:r,rules:N,"label-width":"100px"},{default:l(()=>[e(b,{label:"原密码",prop:"oldPassword"},{default:l(()=>[e(V,{modelValue:r.oldPassword,"onUpdate:modelValue":o[0]||(o[0]=a=>r.oldPassword=a),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),e(b,{label:"新密码",prop:"newPassword"},{default:l(()=>[e(V,{modelValue:r.newPassword,"onUpdate:modelValue":o[1]||(o[1]=a=>r.newPassword=a),type:"password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}}});const me=ne(ue,[["__scopeId","data-v-ae3513ee"]]);export{me as default};

import{d as A,u as H,r as B,a as L,B as M,C as U,b as l,o as R,c as b,e as t,w as e,f as n,t as C,j as m,F as q,D as F,g as w,n as I,q as P,_ as T}from"./index-459586b0.js";import{i as S}from"./index-18acf776.js";const j={class:"home-container"},X={class:"welcome-content"},G={class:"stat-content"},J={class:"stat-content"},K={class:"quick-actions"},Q=A({__name:"HomeView",setup(W){const y=H(),_=B(),f=B();let a=null,o=null;const V={ADMIN:"系统管理员",USER:"普通用户",DOCTOR:"医生"},u=L({doctorCount:0,appointmentCount:0,userCount:0,departmentCount:0}),z=[{content:"系统上线公告：医院管理系统正式上线运行",timestamp:"2025-06-01"},{content:"系统维护通知：系统将于本周日凌晨2点进行例行维护",timestamp:"2025-06-18"},{content:"新功能上线：在线预约挂号功能正式开放",timestamp:"2025-06-09"}],N=()=>{u.doctorCount=25,u.appointmentCount=18,u.userCount=150,u.departmentCount=10},O=()=>{if(_.value){a=S(_.value);const p={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["待审核","已通过","已拒绝","已取消","已完成"]},series:[{name:"预约状态",type:"pie",radius:"70%",center:["50%","50%"],data:[{value:10,name:"待审核"},{value:25,name:"已通过"},{value:5,name:"已拒绝"},{value:8,name:"已取消"},{value:30,name:"已完成"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};a.setOption(p)}},D=()=>{if(f.value){o=S(f.value);const p={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:["内科","外科","妇产科","儿科","眼科","耳鼻喉科","口腔科","皮肤科","精神科","中医科"]},yAxis:{type:"value"},series:[{name:"医生数量",type:"bar",data:[5,4,3,2,2,2,3,1,1,2]}]};o.setOption(p)}},g=()=>{a==null||a.resize(),o==null||o.resize()};return M(()=>{N(),O(),D(),window.addEventListener("resize",g)}),U(()=>{window.removeEventListener("resize",g),a==null||a.dispose(),o==null||o.dispose()}),(p,s)=>{const r=l("el-card"),i=l("el-col"),x=l("el-icon"),h=l("el-statistic"),v=l("el-row"),E=l("el-timeline-item"),$=l("el-timeline"),k=l("el-button");return R(),b("div",j,[t(v,{gutter:20},{default:e(()=>[t(i,{span:8},{default:e(()=>[t(r,{class:"welcome-card"},{header:e(()=>s[2]||(s[2]=[n("div",{class:"card-header"},[n("span",null,"欢迎使用")],-1)])),default:e(()=>{var d,c;return[n("div",X,[s[3]||(s[3]=n("h2",null,"医院管理系统",-1)),n("p",null,"欢迎您，"+C((d=m(y).user)==null?void 0:d.realName),1),n("p",null,"角色："+C(V[((c=m(y).user)==null?void 0:c.role)||""]),1)])]}),_:1})]),_:1}),t(i,{span:8},{default:e(()=>[t(r,{class:"stat-card"},{header:e(()=>s[4]||(s[4]=[n("div",{class:"card-header"},[n("span",null,"医生统计")],-1)])),default:e(()=>[n("div",G,[t(h,{title:"在职医生",value:u.doctorCount},{suffix:e(()=>[t(x,null,{default:e(()=>[t(m(I))]),_:1})]),_:1},8,["value"])])]),_:1})]),_:1}),t(i,{span:8},{default:e(()=>[t(r,{class:"stat-card"},{header:e(()=>s[5]||(s[5]=[n("div",{class:"card-header"},[n("span",null,"预约统计")],-1)])),default:e(()=>[n("div",J,[t(h,{title:"今日预约",value:u.appointmentCount},{suffix:e(()=>[t(x,null,{default:e(()=>[t(m(P))]),_:1})]),_:1},8,["value"])])]),_:1})]),_:1})]),_:1}),t(v,{gutter:20,class:"mt-20"},{default:e(()=>[t(i,{span:12},{default:e(()=>[t(r,null,{header:e(()=>s[6]||(s[6]=[n("div",{class:"card-header"},[n("span",null,"预约状态分布")],-1)])),default:e(()=>[n("div",{ref_key:"pieChartRef",ref:_,class:"chart-container"},null,512)]),_:1})]),_:1}),t(i,{span:12},{default:e(()=>[t(r,null,{header:e(()=>s[7]||(s[7]=[n("div",{class:"card-header"},[n("span",null,"各科室医生数量")],-1)])),default:e(()=>[n("div",{ref_key:"barChartRef",ref:f,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1}),t(v,{gutter:20,class:"mt-20"},{default:e(()=>[t(i,{span:12},{default:e(()=>[t(r,null,{header:e(()=>s[8]||(s[8]=[n("div",{class:"card-header"},[n("span",null,"系统公告")],-1)])),default:e(()=>[t($,null,{default:e(()=>[(R(),b(q,null,F(z,(d,c)=>t(E,{key:c,timestamp:d.timestamp},{default:e(()=>[w(C(d.content),1)]),_:2},1032,["timestamp"])),64))]),_:1})]),_:1})]),_:1}),t(i,{span:12},{default:e(()=>[t(r,null,{header:e(()=>s[9]||(s[9]=[n("div",{class:"card-header"},[n("span",null,"快捷操作")],-1)])),default:e(()=>[n("div",K,[t(k,{type:"primary",onClick:s[0]||(s[0]=d=>p.$router.push("/appointments"))},{default:e(()=>s[10]||(s[10]=[w(" 预约挂号 ")])),_:1,__:[10]}),t(k,{type:"success",onClick:s[1]||(s[1]=d=>p.$router.push("/doctors"))},{default:e(()=>s[11]||(s[11]=[w(" 查看医生 ")])),_:1,__:[11]})])]),_:1})]),_:1})]),_:1})])}}});const ee=T(Q,[["__scopeId","data-v-a9837219"]]);export{ee as default};
